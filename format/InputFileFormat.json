{
  "@type" : "format/generic",
  "assetClass" : "format",
  "assetType" : "generic",
  "uuid" : "e511ac65-c5e3-436e-9b93-c79f2936d7e8",
  "name" : "InputFileFormat",
  "description" : "Bank transactions",
  "definition" : [
    "format {",
    "  name = \"Bank Transactions\" ",
    "  description = \"Random bank transactions\"",
    "",
    "  start-element = \"File\"",
    "  target-namespace = \"BankIn\"",
    "",
    "  elements = [",
    "    // #####################################################################",
    "    // ### File sequence",
    "    // #####################################################################",
    "    {    ",
    "      name = \"File\"",
    "      type = \"Sequence\"",
    "      references = [",
    "        {",
    "          name = \"Header\"",
    "          referenced-element = \"Header\"",
    "        },",
    "        {",
    "          name = \"Details\"",
    "          max-occurs = \"unlimited\"",
    "          referenced-element = \"Detail\"",
    "        },",
    "        {",
    "          name = \"Trailer\"",
    "          referenced-element = \"Trailer\"",
    "        }",
    "      ]",
    "    },",
    "",
    "    // #####################################################################",
    "    // ### Header record ",
    "    // #####################################################################",
    "    {",
    "      name = \"Header\"",
    "      type = \"Separated\"",
    "      regular-expression = \"H\"",
    "      separator-regular-expression = \";\"",
    "      separator = \";\"",
    "      terminator-regular-expression = \"\\r?\\n\"",
    "      terminator = \"\\n\"",
    "",
    "      mapping = {",
    "        message = \"Header\"",
    "        element = \"BT_IN\"",
    "      }",
    "",
    "      parts = [",
    "        {",
    "          name = \"RECORD_TYPE\"",
    "          type = \"RegExpr\"",
    "          regular-expression = \"[^;\\r\\n]*\"",
    "          value.type = \"Text.String\"",
    "        },",
    "        {",
    "          name = \"FILENAME\"",
    "          type = \"RegExpr\"",
    "          regular-expression = \"[^;\\n]*\"",
    "          value.type = \"Text.String\"",
    "        }",
    "      ]",
    "    },",
    "    // #####################################################################",
    "    // ### Detail record",
    "    // #####################################################################",
    "    {",
    "      name = \"Detail\"",
    "      type = \"Separated\"",
    "      regular-expression = \"D\"",
    "      separator-regular-expression = \";\"",
    "      separator = \";\"",
    "      terminator-regular-expression = \"\\r?\\n\"",
    "      terminator = \"\\n\"",
    "",
    "      mapping = {",
    "        message = \"Detail\"",
    "        element = \"BT_IN\"",
    "      }",
    "",
    "      parts = [",
    "        {",
    "          name = \"RECORD_TYPE\"",
    "          type = \"RegExpr\"",
    "          regular-expression = \"[^;\\r\\n]*\"",
    "          value.type = \"Text.String\"",
    "        },",
    "        {",
    "          name = \"DATE\"",
    "          type = \"RegExpr\"",
    "          regular-expression = \"[^;\\r\\n]*\"",
    "          value = {",
    "            type = \"Text.DateTime\"",
    "            format = \"dd-MMM-uuuu\"",
    "          }",
    "        },",
    "        {",
    "          name = \"DESCRIPTION\"",
    "          type = \"RegExpr\"",
    "          regular-expression = \"[^;\\r\\n]*\"",
    "          value = {",
    "            type = \"Text.String\"",
    "          }",
    "        },",
    "        {",
    "          name = \"DEPOSITS\"",
    "          type = \"RegExpr\"",
    "          regular-expression = \"[^;\\r\\n]*\"",
    "          value = {",
    "            type = \"Text.Decimal\"",
    "          }",
    "        },",
    "        {",
    "          name = \"WITHDRAWALS\"",
    "          type = \"RegExpr\"",
    "          regular-expression = \"[^;\\r\\n]*\"",
    "          value.type = \"Text.Decimal\"",
    "        },",
    "        {",
    "          name = \"BALANCE\"",
    "          type = \"RegExpr\"",
    "          regular-expression = \"[^;\\r\\n]*\"",
    "          value = {",
    "            type = \"Text.Decimal\"",
    "          }",
    "        }",
    "      ]",
    "    },",
    "    // #####################################################################",
    "    // # Trailer record                                                 ",
    "    // #####################################################################",
    "     {",
    "      name = \"Trailer\"",
    "      type = \"Separated\"",
    "      regular-expression = \"T\"",
    "      separator-regular-expression = \";\"",
    "      separator = \";\"",
    "      terminator-regular-expression = \"\\r?\\n\"",
    "      terminator = \"\\n\"",
    "",
    "      mapping = {",
    "        message = \"Trailer\"",
    "        element = \"BT_IN\"",
    "      }",
    "",
    "      parts = [",
    "        {",
    "          name = \"RECORD_TYPE\"",
    "          type = \"RegExpr\"",
    "          regular-expression = \"[^;\\r\\n]*\"",
    "          value.type = \"Text.String\"",
    "        },",
    "        {",
    "          name = \"RECORD_COUNT\"",
    "          type = \"RegExpr\"",
    "          regular-expression = \"[^;\\r\\n]*\"",
    "          value.type = \"Text.Integer\"",
    "        }",
    "      ]",
    "     }",
    "  ]",
    "}"
  ]
}